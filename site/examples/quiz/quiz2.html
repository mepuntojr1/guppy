<!doctype html>
<html>

<head>
    <title>KWISER Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://guppy.js.org/build/guppy-default-osk.min.css">
    <script type="text/javascript" src="https://guppy.js.org/build/guppy_osk.js"></script>
    <script type="text/javascript" src="https://guppy.js.org/build/guppy.js"></script>
    <script type="text/javascript" src="https://guppy.js.org/lib/math-expressions/math-expressions.js"></script>
    <script type="text/javascript">
     answers = {"ans1":"1", "ans2":"x^2", "ans3":"( 4+ sqrt( 16 - 4 ) )/( 2 )"};
     questions = {1:"Express $$((sin(x)^2) + (cos(x)^2))$$ without using any trigonometric functions."};
     blank = "\\color{gray}{\\text{Click here to start typing your answer}}";
     check_answer = function(id){
	 attempt = Guppy(id).asciimath();
	 answer = answers[id];
	 feedback_elt = document.getElementById(id+"_feedback")
	 try{
	     if(MathExpression.fromText(attempt).equals(MathExpression.fromText(answer))) 
		 feedback_elt.innerHTML = '<font color="green">Correct</font>';
	     else
		 feedback_elt.innerHTML = '<font color="red">Incorrect</font>';
	 }
	 catch(e){
	     feedback_elt.innerHTML = '<font color="red">Invalid input</font>';
	 }
     }
     window.onload = function(){
     Guppy.use_osk(new GuppyOSK({"goto_tab":"arithmetic","attach":"focus"}));//
	 Guppy.event("done",function(e){check_answer(e.target.editor.id)});
	     
	 document.getElementById(1).innerHTML = questions[1];
	     
	 Guppy.Doc.render_all("text","$$");
	 var g1 = new Guppy("ans1");
	 g1.configure("blacklist",["sin","cos","sec","tan","cot","csc"]);
	 var g2 = new Guppy("ans2");
	 g2.configure("blacklist",["ln","log"]);
	 var g3 = new Guppy("ans3");
      }
    </script>
    <style>
     div.answerbox {
	 width: 400px;
	 border: 2px solid black;
	 padding: 10px;
	 box-shadow: 1px 1px 1px 0 lightgray inset;
	 cursor: text;
	 display:inline-block;
	 margin:10px;
     }
     .button {
	 cursor: pointer;
	 min-height: 23px;
	 display:inline-block;
	 background-color:#66f;
	 padding:10px;
	 border-radius: 5px;
     }
     li {
	 margin-bottom: 20px;
     }
    </style>
</head>

<body>
    <div  style="overflow-y:auto; height:33%;">
	    <h4>Given:</h4>
	    <h3 id=1></h3><br>
	    <h4>Given:</h4>
	    <ol>
  		<li>
		    <div id="ans1" class="answerbox"></div>
	    	    <div class="button" onclick="check_answer('ans1')" id="sub1">Submit</div>
	            <span id="ans1_feedback">Unanswered</span>
		</li>
  		<li>
		    <div id="ans2" class="answerbox"></div>
	    	    <div class="button" onclick="check_answer('ans2')" id="sub2">Submit</div>
	            <span id="ans2_feedback">Unanswered</span>
		</li>
  		<li>
		    <div id="ans3" class="answerbox"></div>
	    	    <div class="button" onclick="check_answer('ans3')" id="sub3">Submit</div>
	            <span id="ans3_feedback">Unanswered</span>
		</li>
	     </ol><br>
	     <h4>Solution:</h4>
    </div>
</body>

</html>
